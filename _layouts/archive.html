---
layout: default
---

<div class="archive">
  <header class="archive__header wrapper">
    <h1 class="archive__title">
      {% if page.type == 'category' or page.permalink contains '/category/' %}
        Category: {{ page.title }}
      {% elsif page.type == 'tag' %}
        Tag: {{ page.title }}
      {% else %}
        {{ page.title }}
      {% endif %}
    </h1>
    {% if page.content %}
      <div class="archive__description prose">
        {{ content }}
      </div>
    {% endif %}
  </header>

  <section class="posts-section wrapper">
    <ol class="post-list">
      {% if page.posts %}
        {% assign posts_to_show = page.posts %}
      {% else %}
        {% assign posts_to_show = site.posts | where_exp: "post", "post.categories contains page.title" %}
      {% endif %}
      {% for post in posts_to_show %}
        <li class="post-list__item">
          <article class="post-preview">
            <div class="post-preview__inner">
              {% if post.image or post.featured_image %}
                {% assign thumb = post.image | default: post.featured_image %}
                {% if thumb contains "https://" or thumb contains "http://" %}
                  {% assign thumb_src = thumb %}
                {% else %}
                  {% assign thumb_src = thumb | prepend: site.baseurl %}
                {% endif %}
                <figure class="post-preview__thumb">
                  <a href="{{ post.url | prepend: site.baseurl }}">
                    <img src="{{ thumb_src }}" alt="" loading="lazy">
                  </a>
                </figure>
              {% endif %}
              <div class="post-preview__body">
                <h3 class="post-preview__title">
                  <a href="{{ post.url | prepend: site.baseurl }}" class="post-preview__title-link">{{ post.title }}</a>
                </h3>
                <div class="post-preview__meta">
                  <time class="post-preview__date" datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%B %d, %Y" }}</time>
                  {% if post.categories.size > 0 %}
                    <div class="post-preview__categories">
                      {% for category in post.categories %}
                        {% assign category_url = nil %}
                        {% for archive in site.archives %}
                          {% if archive.type == 'category' and archive.title == category %}
                            {% assign category_url = archive.url | prepend: site.baseurl %}
                            {% break %}
                          {% endif %}
                        {% endfor %}
                        {% if category_url == nil %}
                          {% assign category_url = '/category/' | append: category | prepend: site.baseurl | append: '/' %}
                        {% endif %}
                        <a href="{{ category_url }}" class="post-preview__category" onclick="event.stopPropagation();">{{ category }}</a>
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>
                {% if post.excerpt %}
                  <p class="post-preview__excerpt">{{ post.excerpt | strip_html | truncate: 160 }}</p>
                {% endif %}
              </div>
            </div>
          </article>
        </li>
      {% endfor %}
    </ol>
  </section>
</div>
